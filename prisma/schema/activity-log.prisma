enum ActivityTargetType {
  DOCUMENT
  POST
  NEWS
  USER
  ANNOUNCEMENT
  AUTH
  SOCIAL
  ATTACHMENT
}

enum ActivityType {
  DOCUMENT_CREATED
  DOCUMENT_UPDATED
  DOCUMENT_DELETED
  DOCUMENT_VIEWED
  DOCUMENT_DUPLICATED
  DOCUMENT_TITLE_CHANGED
  DOCUMENT_DESCRIPTION_CHANGED
  DOCUMENT_SLUG_CHANGED
  DOCUMENT_DOWNLOADS_CHANGED
  DOCUMENT_CATEGORY_CHANGED
  DOCUMENT_THUMBNAIL_CHANGED
  DOCUMENT_PUBLISH_CHANGED
  DOCUMENT_ATTACHMENT_ADDED
  DOCUMENT_ATTACHMENT_DELETED
  DOCUMENT_PUBLISHED_AT_CHANGED
  // Document User Actions
  DOCUMENT_USER_FAVORITED
  DOCUMENT_USER_UNFAVORITED
  DOCUMENT_USER_VIEWED
  DOCUMENT_USER_DOWNLOADED
  DOCUMENT_USER_FOLLOWED
  DOCUMENT_USER_UNFOLLOWED
  DOCUMENT_USER_COMMENTED
  DOCUMENT_USER_COMMENT_LIKED
  DOCUMENT_USER_COMMENT_DELETED
  DOCUMENT_USER_COMMENT_EDITED
  DOCUMENT_USER_COMMENT_REPLIED
  // Document Chapter Actions
  DOCUMENT_CHAPTER_CREATED
  DOCUMENT_CHAPTER_UPDATED
  DOCUMENT_CHAPTER_DELETED
  DOCUMENT_CHAPTER_TITLE_CHANGED
  DOCUMENT_CHAPTER_CONTENT_CHANGED
  DOCUMENT_CHAPTER_ORDER_CHANGED
  DOCUMENT_CHAPTER_VIEWS_CHANGED
  DOCUMENT_CHAPTER_VIDEO_CHANGED
  DOCUMENT_CHAPTER_PUBLISH_CHANGED
  DOCUMENT_CHAPTER_PUBLISHED_AT_CHANGED
  // Document Chapter User Actions
  DOCUMENT_CHAPTER_USER_COMPLETED
  DOCUMENT_CHAPTER_USER_UNCOMPLETED
  // User Actions
  USER_REGISTERED
  USER_EMAIL_VERIFIED
  USER_PASSWORD_CHANGED
  USER_PASSWORD_RESET
  USER_EMAIL_CHANGED
  USER_PHONE_NUMBER_CHANGED
  USER_LOGGED_IN
  USER_PASSWORD_CHANGE_OTP_REQUESTED
  USER_UPDATED
  USER_CONFIG_UPDATED
  USER_KYC_SUBMITTED
  USER_KYC_APPROVED
  USER_KYC_REJECTED
  //News Actions
  NEWS_CREATED
  NEWS_UPDATED
  NEWS_VIEWED
  NEWS_LIKED
  NEWS_CREATED_AT_CHANGED
  NEWS_COMMENTED
  NEWS_COMMENT_LIKED
  NEWS_REACTION_ADDED
  NEWS_REACTION_REMOVED
  NEWS_REACTION_UPDATED
  // Posts Actions
  POST_CREATED
  POST_UPDATED
  POST_DELETED
  POST_PUBLISHED
  POST_UNPUBLISHED
  POST_REJECTED
  POST_REACTION_ADDED
  POST_REACTION_REMOVED
  POST_REACTION_UPDATED
  POST_COMMENTED
  POST_COMMENT_LIKED
  POST_COMMENT_DELETED
  POST_SHARED
}

model ActivityLog {
  id String @id @default(cuid())

  description String? // Optional description
  changes     Json? // Optional structured diff

  targetId     String // ID of the model instance (document, ticket, etc.)
  targetType   ActivityTargetType
  activityType ActivityType

  uploaderId String
  uploader   User   @relation("UserActivities", fields: [uploaderId], references: [id])

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([targetType, targetId])
  @@index([uploaderId])
  @@index([createdAt])
  @@map("activity_logs")
}
